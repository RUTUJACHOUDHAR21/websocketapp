<script>
  const protocol = window.location.protocol === 'https:' ? 'wss' : 'ws';
  const ws = new WebSocket(`${protocol}://websocketapp-z4wo.onrender.com/ws`);

  const messages = document.getElementById('messages');
  const input = document.getElementById('input');

  ws.onmessage = (event) => {
    const msg = document.createElement('div');
    msg.textContent = event.data;

    // Style as "my" or "other" message
    if (event.data.startsWith("You: ")) {
      msg.className = 'my-message';
    } else {
      msg.className = 'other-message';
    }

    messages.appendChild(msg);
    messages.scrollTop = messages.scrollHeight;
  };

  function sendMessage() {
    if (input.value.trim() !== '') {
      const message = 'You: ' + input.value;

      // Send to server
      ws.send(message);

      input.value = '';
    }
  }
</script>
